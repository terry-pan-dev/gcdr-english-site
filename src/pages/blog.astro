---
// Blog page using client-side rendering (CSR)
// The BlogList React component fetches data from the public API

import "../styles/globals.css";
import { Navigation } from "../components/Navigation";
import { Footer } from "../components/Footer";
import { BlogList } from "../components/BlogList";
import {
  getGoogleFontsUrl,
  getPrimaryFontFamily,
  getSecondaryFontFamily,
} from "../config/fonts";

const googleFontsUrl = getGoogleFontsUrl();
const primaryFont = getPrimaryFontFamily();
const secondaryFont = getSecondaryFontFamily();

// Get API base URL from environment
const apiBaseUrl = import.meta.env.PUBLIC_API_BASE_URL || "";

// SEO
const title = "Dharma Insights - Gold Coast Dharma Realm";
const description =
  "Reflections on Buddhist practice, teachings, and the path to awakening from Gold Coast Dharma Realm.";
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const socialImageURL = new URL("/assets/hero-bg.png", Astro.site);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Sitemap -->
    <link rel="sitemap" href="/sitemap-index.xml" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={socialImageURL} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={socialImageURL} />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href={googleFontsUrl} rel="stylesheet" />
  </head>
  <body>
    <div class="min-h-screen bg-dark-text">
      <Navigation client:idle />

      <!-- Hero Section -->
      <div class="relative pt-32 pb-16 bg-dark-bg">
        <!-- Dot Pattern Background -->
        <div class="absolute inset-0 opacity-10">
          <div
            class="absolute inset-0"
            style="background-image: radial-gradient(circle, var(--accent-gold) 1px, transparent 1px); background-size: 50px 50px;"
          >
          </div>
        </div>

        <div
          class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative text-center"
        >
          <!-- Decorative Divider -->
          <div class="inline-flex items-center justify-center mb-6">
            <div class="h-px w-16 bg-accent-gold"></div>
            <div
              class="mx-4 w-16 h-16 rounded-full flex items-center justify-center bg-accent-gold"
            >
              <svg
                class="w-8 h-8 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                ></path>
              </svg>
            </div>
            <div class="h-px w-16 bg-accent-gold"></div>
          </div>

          <h1
            class="text-5xl md:text-6xl mb-6 font-serif text-dark-text"
            style={`font-family: ${secondaryFont};`}
          >
            Dharma Insights
          </h1>
          <p
            class="text-xl max-w-3xl mx-auto text-dark-text/80"
            style={`font-family: ${primaryFont};`}
          >
            Reflections on practice, teachings, and the path to awakening
          </p>
        </div>
      </div>

      <!-- Main Content -->
      <div class="pt-8 pb-8 sm:pb-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <BlogList apiBaseUrl={apiBaseUrl} client:idle />
        </div>
      </div>

      <Footer />
    </div>
  </body>
</html>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
  }
</style>
